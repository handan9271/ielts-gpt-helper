<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>é›…æ€æ ‘æ´ Â· GPT Writing Coach</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="data:,">
  <script src="https://cdn.staticfile.org/marked/9.0.3/marked.min.js"></script>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      background-color: #fff;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      justify-content: center;
      color: #111;
    }

    .container {
      width: 100%;
      max-width: 640px;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      gap: 1.25rem;
    }

    h1 {
      font-size: 1.75rem;
      font-weight: 600;
      text-align: center;
      color: #000;
      margin-bottom: 0.5rem;
    }

    .subtitle {
      text-align: center;
      color: #666;
      font-size: 0.95rem;
      margin-bottom: 1rem;
    }

    input, textarea {
      width: 100%;
      padding: 1rem;
      font-size: 1rem;
      border: 1px solid #ddd;
      border-radius: 12px;
      background: #fafafa;
      transition: border-color 0.2s;
    }

    input:focus, textarea:focus {
      outline: none;
      border-color: #10a37f;
      background: #fff;
    }

    textarea {
      resize: vertical;
      min-height: 140px;
    }

    button {
      padding: 1rem;
      border: none;
      border-radius: 12px;
      font-size: 1rem;
      background-color: #10a37f;
      color: white;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    button:hover {
      background-color: #0e8c6d;
    }

    .output-box {
      white-space: normal;
      padding: 1.5rem;
      border-radius: 12px;
      background-color: #f3f3f3;
      color: #222;
      line-height: 1.7;
    }

    .loading {
      text-align: center;
      color: #999;
      font-style: italic;
    }

    mark {
      background: #fff2a8;
      padding: 0 4px;
      border-radius: 4px;
    }

    footer {
      margin-top: 2rem;
      font-size: 0.85rem;
      color: #aaa;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>é›…æ€æ ‘æ´ Â· GPT Writing Coach</h1>
    <p class="subtitle">å†™ä¸‹ä½ çš„æƒ³æ³•ï¼Œæˆ‘æ¥å¸®ä½ æ¶¦è‰²æˆåœ°é“è‹±æ–‡ âœ¨</p>

    <input id="question" placeholder="è¯·è¾“å…¥è‹±æ–‡æˆ–ä¸­æ–‡é¢˜ç›®ï¼Œä¾‹å¦‚ï¼šDescribe a person you admire" />

    <textarea id="input" placeholder="ç”¨ä¸­æ–‡å†™ä¸‹ä½ æƒ³è¡¨è¾¾çš„å†…å®¹å§ï½"></textarea>

    <button onclick="submit()">ğŸ’¬ ä¼˜åŒ–æˆè‹±æ–‡è¡¨è¾¾</button>

    <div id="output" class="output-box" style="display:none;"></div>
  </div>

  <footer>Â© 2025 GOAT IELTS. All rights reserved.</footer>

  <script>
    const encouragements = [
      "ğŸŒŸ æ¯ä¸€æ¬¡è¡¨è¾¾ï¼Œéƒ½æ˜¯ä¸€æ¬¡çªç ´ ğŸ’ª",
      "ğŸ’¬ ç»§ç»­è¡¨è¾¾ï¼Œä½ å·²ç»æ¯”æ˜¨å¤©æ›´æ£’äº†ï¼",
      "ğŸ§ å°åŠ©æ•™å·²å‡†å¤‡å¥½ï¼Œéšæ—¶å¸®ä½ æ¶¦è‰²è‹±æ–‡ï¼",
      "ğŸ“– è‹±æ–‡è¡¨è¾¾è¶Šç»ƒè¶Šæœ‰æ„Ÿè§‰ï½"
    ];

    marked.use({
      extensions: [{
        name: "highlight",
        level: "inline",
        start(src) { return src.match(/==/)?.index },
        tokenizer(src) {
          const match = /^==(.+?)==/.exec(src);
          if (match) return { type: "highlight", raw: match[0], text: match[1], tokens: [] };
        },
        renderer(token) {
          return `<mark>${token.text}</mark>`;
        }
      }]
    });

    async function submit() {
      const question = document.getElementById('question').value.trim();
      const input = document.getElementById('input').value.trim();
      const outputBox = document.getElementById('output');

      if (!input || !question) {
        outputBox.style.display = 'block';
        outputBox.innerHTML = "âš ï¸ è¯·å¡«å†™é¢˜ç›®å’Œä¸­æ–‡æ€è·¯ã€‚";
        return;
      }

      outputBox.style.display = 'block';
      outputBox.className = "output-box loading";
      outputBox.innerHTML = "â³ å°åŠ©æ•™æ­£åœ¨è®¤çœŸä¼˜åŒ–ä¸­ï¼Œè¯·ç¨å€™â€¦";

      try {
        const res = await fetch("https://ielts-gpt-helper.onrender.com/api/ielts-helper", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ question, input })
        });
        const data = await res.json();
        const encouragement = encouragements[Math.floor(Math.random() * encouragements.length)];
        outputBox.className = "output-box";
        outputBox.innerHTML = marked.parse(data.reply + "\n\n" + encouragement);
      } catch (e) {
        outputBox.className = "output-box";
        outputBox.innerHTML = "âŒ è¯·æ±‚å¤±è´¥ï¼Œè¯·æ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£å¸¸ã€‚";
      }
    }
  </script>
</body>
</html>
