<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>GPT é›…æ€å€¾å¬åŠ©æ•™</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: "Arial", sans-serif; max-width: 800px; margin: auto; padding: 2rem; line-height: 1.6; }
    textarea, button { width: 100%; font-size: 1rem; margin-top: 1rem; }
    textarea { height: 120px; padding: 0.5rem; }
    #output { white-space: pre-wrap; background: #f6f6f6; padding: 1rem; border-radius: 6px; margin-top: 1.5rem; }
    .loading { color: gray; font-style: italic; }
    .zh { color: #666; font-size: 0.95rem; }
    .btn-row { display: flex; gap: 1rem; margin-top: 0.5rem; }
    .btn-row button { flex: 1; }
    .subtitle { color: #888; font-size: 0.95rem; margin-top: -1rem; margin-bottom: 1rem; }
  </style>
</head>
<body>
  <h2>ğŸ§ ä½ å¥½ï¼Œæˆ‘æ˜¯ä½ çš„é›…æ€è¡¨è¾¾å°ä¼™ä¼´</h2>
  <p class="subtitle">æˆ‘ä¸æ‰“åˆ†ã€ä¸æ‰“æ–­ï¼Œåªæƒ³å¬ä½ æ€ä¹ˆè¯´ï¼Œç„¶åå¸®ä½ è¯´å¾—æ›´æ£’ ğŸ’›</p>

  <label>ğŸ§  ä»Šå¤©æˆ‘ä»¬èŠèŠè¿™ä¸ªè¯é¢˜ï¼š</label>
  <div id="current-question" style="margin-top: 0.5rem; font-weight: bold;"></div>
  <p style="font-size: 0.9rem; color: #999;">ğŸ’¡ å¦‚æœè¿™ä¸ªé¢˜ç›®ä½ ä¸å¤ªæœ‰æ„Ÿè§‰ï¼Œç‚¹å‡»ä¸‹é¢æŒ‰é’®æ¢ä¸€ä¸ªï½</p>
  <div class="btn-row">
    <button onclick="randomQuestion()">ğŸ² æ¢ä¸€ä¸ªé¢˜ç›®</button>
  </div>

  <label for="input">âœï¸ ä½ çš„ä¸­æ–‡æƒ³æ³•ï¼š</label>
  <textarea id="input" placeholder="å°±åƒå’Œæœ‹å‹èŠå¤©é‚£æ ·ï¼Œè¯´è¯´ä½ æƒ³åˆ°çš„ç”»é¢ã€ç»†èŠ‚æˆ–æƒ…ç»ªâ€¦"></textarea>

  <button onclick="submit()">ğŸ¬ å¸®æˆ‘ä¼˜åŒ–æˆè‹±æ–‡è¡¨è¾¾</button>

  <div id="output"></div>

  <p style="text-align:center; color:#aaa; margin-top:2rem;">
    ğŸª´ æ¯ä¸€æ¬¡è¡¨è¾¾ï¼Œéƒ½æ˜¯ä½ æ€è€ƒä¸æˆé•¿çš„ä¸€éƒ¨åˆ†ã€‚
  </p>

  <script>
    const questionList = [
      {
        en: "Describe a time you received positive feedback.",
        zh: "æè¿°ä¸€æ¬¡ä½ æ”¶åˆ°ç§¯æåé¦ˆçš„ç»å†"
      },
      {
        en: "Describe a goal you want to achieve in the future.",
        zh: "æè¿°ä¸€ä¸ªä½ æƒ³åœ¨æœªæ¥å®ç°çš„ç›®æ ‡"
      },
      {
        en: "Describe a person who inspires you.",
        zh: "æè¿°ä¸€ä¸ªæ¿€åŠ±ä½ çš„äºº"
      },
      {
        en: "Describe something you did that made you feel proud.",
        zh: "æè¿°ä¸€ä»¶è®©ä½ æ„Ÿåˆ°è‡ªè±ªçš„äº‹"
      },
      {
        en: "Describe a place you would like to visit.",
        zh: "æè¿°ä¸€ä¸ªä½ æƒ³å»çš„åœ°æ–¹"
      },
      {
        en: "Describe a piece of technology you own that is difficult to use.",
        zh: "æè¿°ä¸€ä¸ªä½ æ‹¥æœ‰ä½†éš¾ä»¥ä½¿ç”¨çš„ç§‘æŠ€äº§å“"
      },
      {
        en: "Describe a time you helped someone.",
        zh: "æè¿°ä¸€æ¬¡ä½ å¸®åŠ©ä»–äººçš„ç»å†"
      },
      {
        en: "Describe a time you were excited.",
        zh: "æè¿°ä¸€æ¬¡ä½ æ„Ÿåˆ°å…´å¥‹çš„ç»å†"
      },
      {
        en: "Describe a problem you solved.",
        zh: "æè¿°ä¸€ä¸ªä½ è§£å†³çš„é—®é¢˜"
      },
      {
        en: "Describe a person who often helps others.",
        zh: "æè¿°ä¸€ä¸ªç»å¸¸å¸®åŠ©ä»–äººçš„äºº"
      }
    ];

    let selectedQuestion = null;

    function randomQuestion() {
      selectedQuestion = questionList[Math.floor(Math.random() * questionList.length)];
      document.getElementById("current-question").innerHTML = `
        ${selectedQuestion.en}<br />
        <span class="zh">ğŸ“– ä¸­æ–‡ï¼š${selectedQuestion.zh}</span>
      `;
    }

    window.onload = () => randomQuestion();

    async function submit() {
      const input = document.getElementById('input').value.trim();
      const output = document.getElementById('output');
      if (!input) {
        output.innerText = "âš ï¸ è¯·è¾“å…¥ä½ çš„ä¸­æ–‡æ€è·¯ã€‚";
        return;
      }
      output.innerHTML = '<span class="loading">â³ æˆ‘æ­£åœ¨è®¤çœŸå¸®ä½ æ•´ç†æ€è·¯ï¼Œè¯·ç¨å€™...</span>';
      try {
        const res = await fetch("https://ielts-gpt-helper.onrender.com/api/ielts-helper", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ question: selectedQuestion.en, input })
        });
        const data = await res.json();
        output.innerText = data.reply || "âš ï¸ æ²¡æœ‰ç”ŸæˆæˆåŠŸï¼Œè¯·é‡è¯•æˆ–ç¨åå†æ¥ã€‚";
      } catch (e) {
        output.innerText = "âŒ è¯·æ±‚å¤±è´¥ï¼Œè¯·æ£€æŸ¥æœåŠ¡æ˜¯å¦åœ¨çº¿ã€‚";
      }
    }
  </script>
</body>
</html>
